C51 COMPILER V9.02   LCD                                                                   12/05/2023 18:24:03 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN lcd.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE lcd.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include"delay.h"
   3          #include"lcd.h"
   4          #define LCD_DAT P0
   5          sbit rs=P3^4;
   6          sbit rw=P3^5;
   7          sbit en=P3^6;
   8          void LCD_Init(void)
   9          {
  10   1              delay_ms(16);
  11   1          Write_CMD_LCD(0x30);
  12   1          delay_ms(6);
  13   1              Write_CMD_LCD(0x30);
  14   1          delay_ms(1);
  15   1          Write_CMD_LCD(0x30);
  16   1          delay_ms(1);
  17   1          Write_CMD_LCD(0x38);//set 8-bit mode of operation with 2 lines
  18   1                                                      // and 5X7 character font 
  19   1              Write_CMD_LCD(0x10);//Turning OFF the display
  20   1              Write_CMD_LCD(0x01);//clearing the display
  21   1          Write_CMD_LCD(0x06);//Shifting the cursor to the right side
  22   1                              //after writing each byte onto the display
  23   1              Write_CMD_LCD(0x0f);//Enabling the display with blinking cursor
  24   1      
  25   1      }
  26          void Write_CMD_LCD(char cmd)
  27          {
  28   1          rs=0;
  29   1              Write_LCD(cmd);
  30   1      }
  31          void Write_DAT_LCD(char dat)
  32          {
  33   1              rs=1;
  34   1              Write_LCD(dat);
  35   1      }
  36          void Write_LCD(char ch)
  37          {
  38   1              rw=0;
  39   1              LCD_DAT=ch;
  40   1              en=1;
  41   1              en=0;
  42   1              delay_ms(2);
  43   1      }
  44          void Write_str_LCD(char *p)
  45          {
  46   1              while(*p)
  47   1                      Write_DAT_LCD(*p++);    
  48   1      }
  49          void Write_int_LCD(signed int n)
  50          {
  51   1              char a[10],i=0;
  52   1          if(n<0)
  53   1              {
  54   2                      Write_DAT_LCD('-');
  55   2                      n=-n;
C51 COMPILER V9.02   LCD                                                                   12/05/2023 18:24:03 PAGE 2   

  56   2              }
  57   1              do                       
  58   1              {
  59   2                      a[i++]=n%10+48; 
  60   2                      n=n/10;
  61   2              }while(n);
  62   1          for(i;i>0;i--)
  63   1                      Write_DAT_LCD(a[i-1]);
  64   1      }
  65          void Write_float_LCD(float f,char i)
  66          //1st arg(f) is the float number to be displayed  on LCD
  67          //2nd arg(i) is number digits to be displayed after the dot('.')                      
  68          {
  69   1          unsigned long int n=f;
  70   1              Write_int_LCD(n);
  71   1              Write_DAT_LCD('.');
  72   1          for(i;i>0;i--)
  73   1              {
  74   2                      f=f*10;
  75   2              n=f;    
  76   2                      Write_DAT_LCD(n%10+48);
  77   2              }       
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    326    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      25
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
