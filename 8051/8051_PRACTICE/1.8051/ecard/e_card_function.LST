C51 COMPILER V9.02   E_CARD_FUNCTION                                                       12/02/2023 18:12:58 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE E_CARD_FUNCTION
OBJECT MODULE PLACED IN e_card_function.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE e_card_function.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include"delay.h"
   3          #include"uart.h"
   4          #include"lcd.h"
   5          #include"i2c.h"
   6          #include"keypad.h"
   7          #include"i2c_defines.h"
   8          #include<string.h>
   9          static int bal=1000;
  10          const int pinn=1234;
  11          int amount;
  12          unsigned char a[5]={"1234"};
  13          unsigned char b[5];
  14          static char flag=0;
  15          unsigned char sdat=0; 
  16          unsigned char ch=0;
  17          unsigned char i=0;
  18           
  19             
  20          void voting(void)
  21          {
  22   1       ch=0;
  23   1      
  24   1      cmdlcd(0x01);
  25   1      cmdlcd(0x80);
  26   1       strlcd("1.BJP 2.CONGRESS ");
  27   1       cmdlcd(0xc0);
  28   1       strlcd("3.LOCAL_PARTY 4.NOTA");
  29   1      delay_ms(1000);
  30   1      cmdlcd(0x94);
  31   1      strlcd("please enter party");
  32   1      cmdlcd(0xd4);
  33   1      strlcd("watting....");
  34   1      delay_ms(2000);
  35   1      while((ch=UART_Rxchar())==0);
  36   1       i2cDevByteWrite(0xA0,0x00,flag+48); 
  37   1      flag=i2cDevRandomRead(0xA0,0x00);
  38   1      if(flag==0)
  39   1      {
  40   2      switch(ch)
  41   2      {
  42   3      case '1':
  43   3      cmdlcd(0x01);
  44   3      cmdlcd(0x80);
  45   3      strlcd("now you'r adhabhakt ");
  46   3      delay_ms(5000);
  47   3      cmdlcd(0x01);
  48   3      flag=1;
  49   3              i2cDevByteWrite(0xA0,0x00,flag+48); 
  50   3      break;
  51   3      case '2':
  52   3      cmdlcd(0x01);
  53   3      cmdlcd(0xc0);
  54   3      strlcd("now you are chamcha");
  55   3      delay_ms(5000);
C51 COMPILER V9.02   E_CARD_FUNCTION                                                       12/02/2023 18:12:58 PAGE 2   

  56   3      cmdlcd(0x01);
  57   3      flag=1;
  58   3              i2cDevByteWrite(0xA0,0x00,flag+48);
  59   3       
  60   3      break;
  61   3      case '3':
  62   3      cmdlcd(0x01);
  63   3      cmdlcd(0xc0);
  64   3      strlcd("local party");
  65   3      delay_ms(5000);
  66   3      cmdlcd(0x01);
  67   3      flag=1;
  68   3              i2cDevByteWrite(0xA0,0x00,flag+48);
  69   3      break;
  70   3      case '4':
  71   3      cmdlcd(0x01);
  72   3      cmdlcd(0xc0);
  73   3      strlcd("nota nota nota");
  74   3      delay_ms(5000);
  75   3      cmdlcd(0x01);
  76   3      flag=1;
  77   3              i2cDevByteWrite(0xA0,0x00,flag+48);
  78   3      break;
  79   3      default :cmdlcd(0x01);cmdlcd(0x80); strlcd("invalid input");delay_ms(1000);
  80   3      }
  81   2      }
  82   1      else if(flag==1)
  83   1      {
  84   2      cmdlcd(0x01);
  85   2      cmdlcd(0x80);
  86   2      strlcd("voting done");
  87   2      delay_ms(1000);
  88   2      }
  89   1      cmdlcd(0x01);
  90   1      cmdlcd(0xc0);
  91   1      strlcd("return to menu");
  92   1      delay_ms(2000);
  93   1       }
  94           
  95           //===================================================
  96          void pan(void)
  97          {
  98   1      char ch=0;
  99   1      
 100   1      
 101   1      cmdlcd(0x01);
 102   1      cmdlcd(0x80);
 103   1       strlcd("name ");
 104   1       cmdlcd(0xc0);
 105   1       strlcd("card number");
 106   1      cmdlcd(0x94);
 107   1      strlcd("please enter option");
 108   1      while((ch=UART_Rxchar())==0);
 109   1      cmdlcd(0x01);
 110   1      strlcd("watting....");
 111   1      delay_ms(2000);
 112   1      
 113   1      switch(ch)
 114   1      {
 115   2      case '1':
 116   2      cmdlcd(0x01);
 117   2      cmdlcd(0x80);
C51 COMPILER V9.02   E_CARD_FUNCTION                                                       12/02/2023 18:12:58 PAGE 3   

 118   2      strlcd("PAN CARD HOLDER");
 119   2      cmdlcd(0xC0);
 120   2      strlcd("RAHUL S. BANSOD");
 121   2      delay_ms(5000);
 122   2      cmdlcd(0x01);
 123   2      break;
 124   2      case '2':
 125   2      cmdlcd(0x01);
 126   2      cmdlcd(0x80);
 127   2      strlcd("PAN CARD NUMBER");
 128   2      cmdlcd(0xc0);
 129   2      strlcd("CDTPB0669L");
 130   2      delay_ms(5000);
 131   2      cmdlcd(0x01);
 132   2      break;
 133   2      }
 134   1       }
 135           //------------------------------------------------------------------------------------------
 136          void with(void)
 137          {
 138   1      ch=0;
 139   1      cmdlcd(0x01);
 140   1      cmdlcd(0x80);
 141   1      strlcd("enter the pin");
 142   1      delay_ms(1000);
 143   1      i=0;
 144   1      while((sdat=UART_Rxchar())=='\n')
 145   1      {
 146   2      b[i]=sdat;
 147   2                        i++;
 148   2      }
 149   1      b[i-1]='\0';
 150   1      if(strcmp(a,b)!=0)
 151   1      {          
 152   2      lable:
 153   2      strlcd("enter withdrawal amount ");
 154   2              delay_ms(1000);
 155   2              amount=UART_Rxchar();
 156   2                      delay_ms(1000);
 157   2              if(amount%100==0&&amount<=bal)
 158   2              {
 159   3                      bal-=amount;
 160   3                      cmdlcd(0x01);
 161   3                      cmdlcd(0XC0);
 162   3      
 163   3                      strlcd("REMAING BALANCE");
 164   3                      delay_ms(1000);
 165   3                      cmdlcd(0x01);
 166   3                      cmdlcd(0XC0);
 167   3              integerlcd(bal);
 168   3              delay_ms(2000);
 169   3      
 170   3              }
 171   2              else 
 172   2              {
 173   3              cmdlcd(0x01);
 174   3                      cmdlcd(0XC0);
 175   3                      //printf("invalid amount\n")
 176   3                      strlcd("invalid ammount");
 177   3                      delay_ms(2000);
 178   3                      cmdlcd(0x94);
 179   3                      strlcd("please try again...");
C51 COMPILER V9.02   E_CARD_FUNCTION                                                       12/02/2023 18:12:58 PAGE 4   

 180   3                      delay_ms(2000);
 181   3                      goto lable;
 182   3              }
 183   2      
 184   2      }
 185   1      else 
 186   1       
 187   1      strlcd("invalid password try again ");
 188   1      }
 189          //====================================================
 190          void deposite(void)
 191          {
 192   1      
 193   1      sdat=0; 
 194   1      strlcd("enter deposite");
 195   1      delay_ms(1000);
 196   1      while((sdat=UART_Rxchar())==0);
 197   1      bal+=sdat;
 198   1      cmdlcd(0x01);
 199   1      cmdlcd(0x80);
 200   1      integerlcd(bal);
 201   1      delay_ms(1000);
 202   1      }
 203          void check(void)
 204          {
 205   1       
 206   1      strlcd("your ballance");
 207   1      cmdlcd(0x01);
 208   1      cmdlcd(0x80);
 209   1      integerlcd(bal);
 210   1      
 211   1      }
 212          
 213          void pin(void)
 214          {
 215   1      
 216   1      }
 217          //===============================================
 218           void atm(void)
 219          {
 220   1      char ch=0;
 221   1      cmdlcd(0x01);
 222   1      cmdlcd(0x80);
 223   1       strlcd("1.withdraw 2.deposite ");
 224   1       delay_ms(1000);
 225   1       cmdlcd(0xc0);
 226   1       strlcd("3.check 4.pin 5.exit");
 227   1      delay_ms(1000);
 228   1      cmdlcd(0x94);
 229   1      cmdlcd(0x01);
 230   1      strlcd("please enter option");
 231   1      delay_ms(1000);
 232   1      while((ch=UART_Rxchar())==0);
 233   1      delay_ms(1000);
 234   1      cmdlcd(0x01);
 235   1      strlcd("watting....");
 236   1      delay_ms(2000);
 237   1      switch(ch)
 238   1      {
 239   2      case '1':with();break;
 240   2      case '2':deposite();break;
 241   2      case '3':check();break;
C51 COMPILER V9.02   E_CARD_FUNCTION                                                       12/02/2023 18:12:58 PAGE 5   

 242   2      case '5': break;//goto lable; 
 243   2      case '4': pin();break;
 244   2      default : cmdlcd(0x01);cmdlcd(0x80);strlcd("invalid key\n");
 245   2      }
 246   1      }
 247          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    988    ----
   CONSTANT SIZE    =    481    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     20       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
