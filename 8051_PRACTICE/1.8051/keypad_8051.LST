C51 COMPILER V9.02   KEYPAD_8051                                                           11/28/2023 19:11:31 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE KEYPAD_8051
OBJECT MODULE PLACED IN keypad_8051.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE keypad_8051.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include"delay.h"
   2          #include"keypad.h"
   3          /* Define Look-Up Table for key values for T.B KeyPad */
   4          unsigned char keypad[4][4]={{1,2,3,4},
   5                              {5,6,7,8},
   6                              {9,10,11,12},
   7                           {13,14,15,0}};       
   8          
   9          
  10          /* Declaration : row & coloumn */
  11          unsigned char row=0,col=0;       
  12          unsigned char keypress;
  13          
  14          /* Coloumn Scan */
  15          
  16          unsigned char colscan()
  17          {
  18   1          return(C0&C1&C2&C3);
  19   1      }
  20          
  21          
  22          unsigned char keyscan()
  23          {
  24   1          R0=R1=R2=R3=0;                //All rows as zeros
  25   1          C0=C1=C2=C3=1;                //All colomns are ones
  26   1          
  27   1          while(colscan());            // Wait for Key pressing
  28   1          
  29   1      /* Row Checking : Give Probabilities on each ROW */
  30   1             
  31   1      /* For Row0 */
  32   1              R0=0;R1=R2=R3=1;
  33   1      
  34   1              if(!colscan())            // Any key Pressed in ROW0
  35   1              {
  36   2                  row=0;                 // ROW:0 value assigned to var.
  37   2                  goto colcheck;        // Go for coloumn
  38   2              }
  39   1      
  40   1      /* For Row1 */
  41   1              R1=0;R0=R2=R3=1;   
  42   1      
  43   1              if(!colscan())            // Any key Pressed in ROW1   
  44   1              {   
  45   2                  row=1;                // ROW:1 value assigned to var.
  46   2                  goto colcheck;        // Go for coloumn   
  47   2              }
  48   1      
  49   1      /* For Row2 */
  50   1              R2=0;R1=R0=R3=1;
  51   1      
  52   1              if(!colscan())            // Any key Pressed in ROW2
  53   1              {
  54   2                  row=2;                // ROW:2 value assigned to var.
  55   2                  goto colcheck;        // Go for coloumn
C51 COMPILER V9.02   KEYPAD_8051                                                           11/28/2023 19:11:31 PAGE 2   

  56   2              }
  57   1      
  58   1      /* For Row3 */
  59   1              R3=0;R1=R2=R0=1;
  60   1      
  61   1              if(!colscan())            // Any key Pressed
  62   1              {
  63   2                  row=3;                // ROW:3 value assigned to var.
  64   2                  goto colcheck;        // Go for coloumn
  65   2              }
  66   1      
  67   1      /* Coloumn Check*/
  68   1      colcheck:
  69   1          if(C0==0)                    // Any key Pressed in COL0
  70   1              col=0;                    // COL:0 value assigned to var.   
  71   1          else if(C1==0)                // Any key Pressed in COL1
  72   1              col=1;                    // COL:1 value assigned to var.
  73   1          else if(C2==0)                // Any key Pressed in COL2
  74   1              col=2;                    // COL:2 value assigned to var.
  75   1          else if(C3==0)                // Any key Pressed in COL2
  76   1              col=3;                    // COL:3 value assigned to var.
  77   1      
  78   1          while(!colscan());            // Wait for key release
  79   1          delay_ms(100);
  80   1          return keypad[row][col];    // Return key Value   
  81   1      }
  82          
  83           


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    164    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     19    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
