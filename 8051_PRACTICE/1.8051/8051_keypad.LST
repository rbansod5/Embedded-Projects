C51 COMPILER V9.02   8051_KEYPAD                                                           11/19/2023 12:01:49 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE 8051_KEYPAD
OBJECT MODULE PLACED IN 8051_keypad.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 8051_keypad.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #include"8051_keypad.h"
   3          
   4          int keypadLUT[4][4]=
   5          { 
   6          {1,2,3,4},
   7          {5,6,7,8},
   8          {9,10,11,12},
   9          {'!',0,'#','&'}
  10          };
  11          void Initrows(void)
  12          {
  13   1      ROW0=0XF;
  14   1      }
  15          
  16          void Initcols(void)
  17          {
  18   1      COL0=0xf;
  19   1      }
  20          
  21          char colscan(void)
  22          {
  23   1      char t;
  24   1      t=(COL0=0xf);
  25   1      t=(t<15)?0:1;
  26   1      return t;
  27   1      }
  28          
  29          char keyscan(void)
  30          {
  31   1      char rno,cno,keyval=0;
  32   1      while(colscan())
  33   1      {
  34   2      keyval++;
  35   2      }
  36   1      
  37   1      ROW0=0xe;
  38   1      if(!colscan())
  39   1      {
  40   2      rno=0;
  41   2      goto colcheck;
  42   2      }
  43   1      
  44   1      ROW0=0xd;
  45   1      if(!colscan())
  46   1      {
  47   2      rno=1;
  48   2      goto colcheck;
  49   2      }
  50   1      
  51   1      ROW0=0xb;
  52   1      if(!colscan())
  53   1      {
  54   2      rno=2;
  55   2      goto colcheck;
C51 COMPILER V9.02   8051_KEYPAD                                                           11/19/2023 12:01:49 PAGE 2   

  56   2      }
  57   1      
  58   1      ROW0=0x7;
  59   1      if(!colscan())
  60   1      {
  61   2      rno=3;
  62   2      goto colcheck;
  63   2      }
  64   1      colcheck:
  65   1      ROW0=0x0;
  66   1      if(COL0==0) cno=0;
  67   1      else if(COL1==0) cno=1;
  68   1      else if(COL2==0) cno=2;
  69   1      else if(COL3==0) cno=3;
  70   1      keyval=keypadLUT[rno][cno];
  71   1      return keyval;
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    128    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
