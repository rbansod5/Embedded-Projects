C51 COMPILER V9.02   LCD                                                                   12/02/2023 19:04:43 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN lcd.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE lcd.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include"delay.h"
   3          #include"lcd.h"
   4          #define LCD_DAT P0
   5            sbit RS=P3^4;
   6          sbit RW=P3^5;
   7          sbit EN=P3^6;
   8          
   9          char cgram_lut[]={0x17,0x14,0x14,0x1f,0x05,0x05,0x1d,0x00};
  10          void cmdlcd(char cmd)
  11          {
  12   1              RS=0;           // COMMAND REGISTER WILL OPEN
  13   1              LCD_DAT=cmd;
  14   1              RW=0;           // WRITE MODE, 8 BIT INFO(CMD) IS WRITING ON LCD
  15   1              EN=1;
  16   1              delay_ms(2);
  17   1              EN=0;           // To Process the info
  18   1      }       
  19          void datalcd(char dat)
  20          {
  21   1              RS=1;           // DATA REGISTER WILL OPEN
  22   1              LCD_DAT=dat;
  23   1              RW=0;           // WRITE MODE, 8 BIT INFO(CMD) IS WRITING ON LCD
  24   1              EN=1;
  25   1              delay_ms(2);
  26   1              EN=0;           // To Process the info
  27   1      }       
  28          void initlcd(void)
  29          {
  30   1              cmdlcd(0x38);//5x7 pixel, 8-bit mode, 2lines
  31   1              cmdlcd(0x10);//display off , cursor off
  32   1              cmdlcd(0x01);//clear the screen
  33   1              cmdlcd(0x0e);//displayon cursor on
  34   1              cmdlcd(0x80);//first line first position
  35   1      }
  36          void strlcd(char *str/*VECTOR*/)
  37          {
  38   1              while(*str!='\0')//'V','E','C','T','O','R','\0' -  LOOP FAILS
  39   1              {
  40   2                      datalcd(*str);//1('V')
  41   2                      str++;//base address will increment
  42   2              }
  43   1      }
  44          void integerlcd(int num )
  45          {
  46   1              char a[10], index=0;
  47   1              if(num==0)
  48   1                      datalcd(0+48);
  49   1              while(num)//123 is not zero //12 is not zero // 1 is not zero // 0 is zero. So, cond fails,breaks the loo
             -p
  50   1              {
  51   2                      a[index++]=num%10;//(1)123%10 = > a[0]=3, index=1  (2)12%10=2 => a[1]=2 , index=2
  52   2                      //(3)1%10=1 => a[2]=1,index=3
  53   2                      num=num/10;     //(1) 123/10=12 (2)12/10=1  (3) 1/10=0 
  54   2              }
C51 COMPILER V9.02   LCD                                                                   12/02/2023 19:04:43 PAGE 2   

  55   1              for(--index;index>=0;index--)//index ==>3-1=2  //2-1=1                          //1-1=0
  56   1                      datalcd(a[index]+48);   //a[2]+48=>1+48='1'//a[1]+48=2+48='2'   //a[0]+48=3+48='3'
  57   1      }
  58          
  59          /* Store Customzied characters hexadecimal values in CGRAM */
  60          void BuildCgram(void)
  61          {
  62   1              char i=0;
  63   1              cmdlcd(0x40);//CGRAM ADDRESS STARTS FROM 0X40 - 0x47
  64   1              for(i=0;i<8;i++)
  65   1                      datalcd(cgram_lut[i]);
  66   1      }
  67          
  68          
  69           
  70           


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    221    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8      17
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
